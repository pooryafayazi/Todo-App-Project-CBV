




{% for task in tasks %}
    <ul class="list-group list-group-horizontal rounded-0">
        <li class="list-group-item d-flex align-items-center ps-0 pe-3 py-1 rounded-0 border-0 bg-transparent">
            <div class="form-check">
                <form method="POST" action="{% url 'tasks:task-complete' pk=task.id %}" id="update-form-{{ task.id }}">
                    {% csrf_token %}
                    <input type="hidden" name="complete" value="{% if task.complete %}False{% else %}True{% endif %}">
                    {% if task.complete %}
                        <input class="form-check-input me-0" type="checkbox" value="" id="flexCheckChecked1" aria-label="..." checked onchange="submitForm(this, '{{ task.id }}')" />
                    {% else %}
                        <input class="form-check-input me-0" name="complete" type="checkbox" value="" id="flexCheckChecked2" aria-label="..." onchange="submitForm(this, '{{ task.id }}')" />
                    {% endif %}
                </form>
            </div>
        </li>
        <li class="list-group-item px-3 py-1 d-flex align-items-center flex-grow-1 border-0 bg-transparent">
            <p class="lead fw-normal mb-0 task-title" id="task-title-{{ task.id }}" style="{% if task.complete == True %}text-decoration: line-through;{% endif %}">{{ task.title }}</p>
        </li>

        {% if task.due_date %}
            <li class="list-group-item px-3 py-1 d-flex align-items-center border-0 bg-transparent">
                <div class="py-2 px-3 me-2 border border-warning rounded-3 d-flex align-items-center bg-body-tertiary">
                    <p class="small mb-0">
                        <a href="#!" data-mdb-tooltip-init title="Due on date"><i class="fas fa-hourglass-half me-2 text-warning"></i></a>
                        {{ task.due_date }}
                    </p>
                </div>
            </li>
        {% endif %}
        <li class="list-group-item ps-3 pe-0 py-1 rounded-0 border-0 bg-transparent">
            <div class="d-flex flex-row justify-content-end mb-1">
                <a href="{% url 'tasks:task-update' pk=task.id %}" class="text-info" data-mdb-tooltip-init title="Edit todo"><i class="fas fa-pencil-alt me-3"></i></a>
            </div>
        </li>
    </ul>
{% endfor %}

<script>
    function submitForm(checkbox, taskId) {
        const form = document.getElementById('update-form-' + taskId);
        form.elements['complete'].value = checkbox.checked ? 'True' : 'False';
        form.submit();
    }
</script>
